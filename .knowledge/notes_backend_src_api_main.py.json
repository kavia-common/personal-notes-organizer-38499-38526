{"is_source_file": true, "format": "Python (FastAPI)", "description": "This is the main source code file for a personal notes backend API built using FastAPI. It defines app initialization, in-memory repositories for users, tokens, and notes, security utilities, data models, and HTTP route handlers for user authentication and CRUD operations on notes.", "external_files": ["fastapi", "pydantic", "starlette.responses", "os", "secrets", "time", "uuid", "datetime", "threading", "typing"], "external_methods": ["Depends", "FastAPI", "HTTPException", "Path", "Query", "Request", "status", "CORSMiddleware", "HTTPAuthorizationCredentials", "HTTPBearer", "BaseModel", "EmailStr", "Field", "JSONResponse"], "published": ["app", "health_check", "signup", "login", "create_note", "list_notes", "get_note", "update_note", "delete_note"], "classes": [{"name": "InMemoryUsersRepo", "description": "Thread-safe in-memory user repository handling user data storage and retrieval by email and ID."}, {"name": "InMemoryTokensRepo", "description": "Thread-safe in-memory token store managing token creation, validation, and revocation."}, {"name": "InMemoryNotesRepo", "description": "Thread-safe in-memory notes repository supporting CRUD operations and filtering for user-owned notes."}, {"name": "HealthResponse", "description": "Pydantic model for health check response message."}, {"name": "SignupRequest", "description": "Pydantic model for user signup request payload."}, {"name": "AuthResponse", "description": "Pydantic model representing authentication response including access token details."}, {"name": "LoginRequest", "description": "Pydantic model for user login request payload."}, {"name": "NoteCreate", "description": "Pydantic model for creating new notes."}, {"name": "NoteUpdate", "description": "Pydantic model for updating existing notes."}, {"name": "NoteOut", "description": "Pydantic model for displaying note data in API responses."}, {"name": "PaginatedNotes", "description": "Pydantic model for paginated list of notes with total count."}], "methods": [{"name": "HealthResponse health_check()", "description": "Endpoint for a health status check; returns a simple 'Healthy' message.", "scope": "", "scopeKind": ""}, {"name": "AuthResponse signup(payload: SignupRequest)", "description": "Creates a new user account and returns an access token.", "scope": "", "scopeKind": ""}, {"name": "AuthResponse login(payload: LoginRequest)", "description": "Authenticates a user with email and password, returning an access token.", "scope": "", "scopeKind": ""}, {"name": "NoteOut create_note(note: NoteCreate, user_id: str = Depends(get_current_user_id))", "description": "Creates a new note owned by the authenticated user.", "scope": "", "scopeKind": ""}, {"name": "PaginatedNotes list_notes( user_id: str = Depends(get_current_user_id), limit: int = Query(20, ge=1, le=100, description=\"Page size\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), q: Optional[str] = Query(None, description=\"Search text in title or content\"), tag: Optional[str] = Query(None, description=\"Filter by tag\"), )", "description": "Lists notes for the user with optional pagination, search, and filtering.", "scope": "", "scopeKind": ""}, {"name": "NoteOut get_note( note_id: str = Path(..., description=\"Note ID\"), user_id: str = Depends(get_current_user_id), )", "description": "Retrieves a specific note by ID, if owned by current user.", "scope": "", "scopeKind": ""}, {"name": "NoteOut update_note( note: NoteUpdate, note_id: str = Path(..., description=\"Note ID\"), user_id: str = Depends(get_current_user_id), )", "description": "Updates an existing note owned by the user.", "scope": "", "scopeKind": ""}, {"name": "JSONResponse delete_note( note_id: str = Path(..., description=\"Note ID\"), user_id: str = Depends(get_current_user_id), )", "description": "Deletes a note owned by the current user.", "scope": "", "scopeKind": ""}, {"name": "None __init__(self)", "scope": "InMemoryUsersRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "str _hash_password(password: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool _verify_password(password: str, password_hash: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict create(self, owner_id: str, title: str, content: str, tags: List[str])", "scope": "InMemoryNotesRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "str create_token(self, user_id: str, ttl_seconds: int)", "scope": "InMemoryTokensRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict create_user(self, email: str, password_hash: str)", "scope": "InMemoryUsersRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "bool delete(self, note_id: str)", "scope": "InMemoryNotesRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[Dict] get(self, note_id: str)", "scope": "InMemoryNotesRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[Dict] get_by_email(self, email: str)", "scope": "InMemoryUsersRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[Dict] get_by_id(self, user_id: str)", "scope": "InMemoryUsersRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "str get_current_user_id(credentials: Optional[HTTPAuthorizationCredentials] = Depends(security))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Tuple[List[Dict],int] list_for_owner( self, owner_id: str, limit: int, offset: int, q: Optional[str], tag: Optional[str], )", "scope": "InMemoryNotesRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "None revoke(self, token: str)", "scope": "InMemoryTokensRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[Dict] update(self, note_id: str, title: str, content: str, tags: List[str])", "scope": "InMemoryNotesRepo", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] validate_token(self, token: str)", "scope": "InMemoryTokensRepo", "scopeKind": "class", "description": "unavailable"}], "calls": ["get_current_user_id", "users_repo.get_by_email", "tokens_repo.create_token", "tokens_repo.validate_token", "notes_repo.create", "notes_repo.get", "notes_repo.update", "notes_repo.delete", "notes_repo.list_for_owner"], "search-terms": ["FastAPI", "Notes API", "InMemory repositories", "user authentication", "notes CRUD", "Bearer token", "API endpoints", "pydantic models", "CORS middleware"], "state": 2, "file_id": 3, "knowledge_revision": 10, "git_revision": "8791f80c22a0e47d249872b633cc52932abdc548", "revision_history": [{"9": "8791f80c22a0e47d249872b633cc52932abdc548"}, {"10": "8791f80c22a0e47d249872b633cc52932abdc548"}], "ctags": [{"_type": "tag", "name": "ACCESS_TOKEN_TTL_SECONDS", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^ACCESS_TOKEN_TTL_SECONDS = int(os.getenv(\"ACCESS_TOKEN_TTL_SECONDS\", \"86400\"))  # 24h$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "AuthResponse", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class AuthResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "HealthResponse", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class HealthResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "InMemoryNotesRepo", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class InMemoryNotesRepo:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "InMemoryTokensRepo", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class InMemoryTokensRepo:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "InMemoryUsersRepo", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class InMemoryUsersRepo:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class NoteCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteOut", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class NoteOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class NoteUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PaginatedNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class PaginatedNotes(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SECRET_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^SECRET_KEY = os.getenv(\"SECRET_KEY\", \"dev-insecure-secret-change-me\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SignupRequest", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^class SignupRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "InMemoryNotesRepo", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "InMemoryTokensRepo", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "InMemoryUsersRepo", "scopeKind": "class"}, {"_type": "tag", "name": "_hash_password", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def _hash_password(password: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(password: str)"}, {"_type": "tag", "name": "_verify_password", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def _verify_password(password: str, password_hash: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(password: str, password_hash: str)"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    access_token: str = Field(..., description=\"Access token to use in Authorization header\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AuthResponse", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Note content\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(\"\", description=\"Note content\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(\"\", description=\"Note content\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def create(self, owner_id: str, title: str, content: str, tags: List[str]) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "member", "signature": "(self, owner_id: str, title: str, content: str, tags: List[str])", "scope": "InMemoryNotesRepo", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def create_note(note: NoteCreate, user_id: str = Depends(get_current_user_id)) -> NoteOut:$/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "(note: NoteCreate, user_id: str = Depends(get_current_user_id))"}, {"_type": "tag", "name": "create_token", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def create_token(self, user_id: str, ttl_seconds: int) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, user_id: str, ttl_seconds: int)", "scope": "InMemoryTokensRepo", "scopeKind": "class"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def create_user(self, email: str, password_hash: str) -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "member", "signature": "(self, email: str, password_hash: str)", "scope": "InMemoryUsersRepo", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    created_at: str = Field(..., description=\"Creation timestamp (ISO8601)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def delete(self, note_id: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, note_id: str)", "scope": "InMemoryNotesRepo", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def delete_note($/", "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "( note_id: str = Path(..., description=\"Note ID\"), user_id: str = Depends(get_current_user_id), )"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    email: EmailStr = Field(..., description=\"User email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    email: EmailStr = Field(..., description=\"User email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "expires_in", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    expires_in: int = Field(..., description=\"Token expiration in seconds\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "AuthResponse", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def get(self, note_id: str) -> Optional[Dict]:$/", "language": "Python", "typeref": "typename:Optional[Dict]", "kind": "member", "signature": "(self, note_id: str)", "scope": "InMemoryNotesRepo", "scopeKind": "class"}, {"_type": "tag", "name": "get_by_email", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def get_by_email(self, email: str) -> Optional[Dict]:$/", "language": "Python", "typeref": "typename:Optional[Dict]", "kind": "member", "signature": "(self, email: str)", "scope": "InMemoryUsersRepo", "scopeKind": "class"}, {"_type": "tag", "name": "get_by_id", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def get_by_id(self, user_id: str) -> Optional[Dict]:$/", "language": "Python", "typeref": "typename:Optional[Dict]", "kind": "member", "signature": "(self, user_id: str)", "scope": "InMemoryUsersRepo", "scopeKind": "class"}, {"_type": "tag", "name": "get_current_user_id", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def get_current_user_id(credentials: Optional[HTTPAuthorizationCredentials] = Depends(security))/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(credentials: Optional[HTTPAuthorizationCredentials] = Depends(security))"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def get_note($/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "( note_id: str = Path(..., description=\"Note ID\"), user_id: str = Depends(get_current_user_id), )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def health_check() -> HealthResponse:$/", "language": "Python", "typeref": "typename:HealthResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Note ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    items: List[NoteOut] = Field(..., description=\"Notes for current page\")$/", "language": "Python", "typeref": "typename:List[NoteOut]", "kind": "variable", "scope": "PaginatedNotes", "scopeKind": "class"}, {"_type": "tag", "name": "list_for_owner", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def list_for_owner($/", "language": "Python", "typeref": "typename:Tuple[List[Dict],int]", "kind": "member", "signature": "( self, owner_id: str, limit: int, offset: int, q: Optional[str], tag: Optional[str], )", "scope": "InMemoryNotesRepo", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def list_notes($/", "language": "Python", "typeref": "typename:PaginatedNotes", "kind": "function", "signature": "( user_id: str = Depends(get_current_user_id), limit: int = Query(20, ge=1, le=100, description=\"Page size\"), offset: int = Query(0, ge=0, description=\"Offset for pagination\"), q: Optional[str] = Query(None, description=\"Search text in title or content\"), tag: Optional[str] = Query(None, description=\"Filter by tag\"), )"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def login(payload: LoginRequest) -> AuthResponse:$/", "language": "Python", "typeref": "typename:AuthResponse", "kind": "function", "signature": "(payload: LoginRequest)"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    message: str = Field(..., description=\"Health status message\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "HealthResponse", "scopeKind": "class"}, {"_type": "tag", "name": "notes_repo", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^notes_repo = InMemoryNotesRepo()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "owner_id", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    owner_id: str = Field(..., description=\"Owner user ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    password: str = Field(..., description=\"User password\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    password: str = Field(..., min_length=6, description=\"Password (min 6 chars)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "revoke", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def revoke(self, token: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, token: str)", "scope": "InMemoryTokensRepo", "scopeKind": "class"}, {"_type": "tag", "name": "security", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^security = HTTPBearer(auto_error=False)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def signup(payload: SignupRequest) -> AuthResponse:$/", "language": "Python", "typeref": "typename:AuthResponse", "kind": "function", "signature": "(payload: SignupRequest)"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    tags: List[str] = Field(default_factory=list, description=\"Tags for the note\")$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    tags: List[str] = Field(default_factory=list, description=\"Tags for the note\")$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    tags: List[str] = Field(default_factory=list, description=\"Tags for the note\")$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Note title\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Note title\", min_length=1)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Note title\", min_length=1)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "token_type", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    token_type: str = Field(\"bearer\", description=\"Token type\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AuthResponse", "scopeKind": "class"}, {"_type": "tag", "name": "tokens_repo", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^tokens_repo = InMemoryTokensRepo()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "total", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    total: int = Field(..., description=\"Total notes matching criteria\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "PaginatedNotes", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def update(self, note_id: str, title: str, content: str, tags: List[str]) -> Optional[Dict]:$/", "language": "Python", "typeref": "typename:Optional[Dict]", "kind": "member", "signature": "(self, note_id: str, title: str, content: str, tags: List[str])", "scope": "InMemoryNotesRepo", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^def update_note($/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "( note: NoteUpdate, note_id: str = Path(..., description=\"Note ID\"), user_id: str = Depends(get_current_user_id), )"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    updated_at: str = Field(..., description=\"Last update timestamp (ISO8601)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "users_repo", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^users_repo = InMemoryUsersRepo()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "validate_token", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-38499-38526/notes_backend/src/api/main.py", "pattern": "/^    def validate_token(self, token: str) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "member", "signature": "(self, token: str)", "scope": "InMemoryTokensRepo", "scopeKind": "class"}], "hash": "fb7cd595b73e8cc9da97627a034d9bfb", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/main.py", "fields": [{"name": "ACCESS_TOKEN_TTL_SECONDS = int(os.getenv(\"ACCESS_TOKEN_TTL_SECONDS\", \"86400\"))  # 24h", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SECRET_KEY = os.getenv(\"SECRET_KEY\", \"dev-insecure-secret-change-me\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str access_token", "scope": "AuthResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str content", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "str created_at", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr email", "scope": "LoginRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int expires_in", "scope": "AuthResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "List[NoteOut] items", "scope": "PaginatedNotes", "scopeKind": "class", "description": "unavailable"}, {"name": "str message", "scope": "HealthResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "notes_repo = InMemoryNotesRepo()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str owner_id", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "str password", "scope": "LoginRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "security = HTTPBearer(auto_error=False)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[str] tags", "scope": "NoteCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "str token_type", "scope": "AuthResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "tokens_repo = InMemoryTokensRepo()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int total", "scope": "PaginatedNotes", "scopeKind": "class", "description": "unavailable"}, {"name": "str updated_at", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "users_repo = InMemoryUsersRepo()", "scope": "", "scopeKind": "", "description": "unavailable"}]}